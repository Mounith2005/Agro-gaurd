<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="UTF-8">

  <title>Detection Result</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body { 
      background: linear-gradient(135deg, #a7b9c1, #cfe1e8, #2c5364); 
      color: #eee6e6; 
      font-family: 'Segoe UI', sans-serif; 
    }
    .navbar { background: rgba(20,20,20,0.9); backdrop-filter: blur(10px); }
    .card { 
      background: rgba(5, 4, 4, 0.08); 
      backdrop-filter: blur(15px); 
      border-radius: 18px; 
      border: none; 
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5); 
      padding: 30px; 
      color: #060703; 
      text-align:left; 
    }
    .btn-custom { 
      background: linear-gradient(45deg,#4cafef,#00c6ff); 
      border: none; 
      color: rgb(17, 15, 15); 
      border-radius: 30px; 
      padding: 10px 25px; 
      transition: transform 0.2s ease-in-out; 
    }
    .btn-custom:hover { transform: scale(1.05); }
    .section-box {
      background: rgba(16, 15, 15, 0.1);
      padding: 15px 20px;
      border-radius: 12px;
      margin-bottom: 15px;
    }
    .section-box h5 {
      color: #b33106;
      font-weight: 600;
    }
    .disease-name {
      font-size: 1.4rem;
      font-weight: bold;
      color: #000000;
    }
    .progress { height: 20px; border-radius: 10px; background-color: rgba(255,255,255,0.1); }
    .progress-bar { background: linear-gradient(90deg,#4cafef,#00c6ff); font-size: 0.9rem; }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-dark px-3 d-flex justify-content-between">
    <a class="navbar-brand fw-bold" href="/">üå± Plant Disease Detector</a>
    <div>
      {% if session.username %}
        <span class="me-3">Hello, {{ session.username }}!</span>
        <a href="/logout" class="btn btn-custom">Logout</a>
      {% else %}
        <a href="/login" class="btn btn-custom me-2">Login</a>
        <a href="/register" class="btn btn-custom">Register</a>
      {% endif %}
    </div>
  </nav>
  <div class="container d-flex justify-content-center my-5">
    <div class="card col-md-8">
      <h2 class="mb-4 text-center">‚úÖ Detection Result</h2>
      <!-- Uploaded Image -->
      <div class="text-center">
        <img src="{{ url_for('static', filename='uploads/' + filename) }}" 
             alt="Leaf Image" class="img-fluid rounded mb-3 shadow" 
             style="max-height:280px;">
      </div>
      <!-- Disease Name -->
      <p class="disease-name mb-3">Disease: {{ solution['disease'] }}</p>
      <!-- Confidence -->
      <div class="mb-4">
        <p class="mb-1">Confidence:</p>
        <div class="progress">
          <div class="progress-bar" role="progressbar" 
               style="width: {{ (confidence*100)|round(2) }}%;" 
               aria-valuenow="{{ (confidence*100)|round(2) }}" 
               aria-valuemin="0" aria-valuemax="100">
            {{ '%.2f'|format(confidence*100) }}%
          </div>
        </div>
      </div>
      <!-- Detailed Information -->
      <!-- Detailed Information -->
<div class="section-box">
  <h5>ü¶† Cause</h5>
  <ul>
    {% for item in solution['cause'] %}
      <li>{{ item }}</li>
    {% endfor %}
  </ul>
</div>

<div class="section-box">
  <h5>üîç Symptoms</h5>
  <ul>
    {% for item in solution['symptoms'] %}
      <li>{{ item }}</li>
    {% endfor %}
  </ul>
</div>

<div class="section-box">
  <h5>üõ° Prevention</h5>
  <ul>
    {% for item in solution['prevention'] %}
      <li>{{ item }}</li>
    {% endfor %}
  </ul>
</div>

<div class="section-box">
  <h5>üí° Remedy</h5>
  <ul>
    {% for item in solution['remedy'] %}
      <li>{{ item }}</li>
    {% endfor %}
  </ul>
</div>

      <!-- Buttons -->
      <div class="text-center mt-4">
        <a href="/detect" class="btn btn-custom me-2">üîô Test Another</a>
        <a href="/" class="btn btn-custom">üè† Back to Home</a>
      </div>
    </div>
  </div>
</body>
</html>